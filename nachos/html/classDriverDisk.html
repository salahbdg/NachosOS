<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Nachos: DriverDisk Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">Nachos
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.8 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pri-attribs">Private Attributes</a> &#124;
<a href="classDriverDisk-members.html">List of all members</a>  </div>
  <div class="headertitle"><div class="title">DriverDisk Class Reference</div></div>
</div><!--header-->
<div class="contents">

<p><code>#include &lt;<a class="el" href="drvDisk_8h_source.html">drvDisk.h</a>&gt;</code></p>
<div class="dynheader">
Collaboration diagram for DriverDisk:</div>
<div class="dyncontent">
<div class="center"><img src="classDriverDisk__coll__graph.png" border="0" usemap="#aDriverDisk_coll__map" alt="Collaboration graph"/></div>
<map name="aDriverDisk_coll__map" id="aDriverDisk_coll__map">
<area shape="rect" title="Defines a &quot;synchronous&quot; disk abstraction." alt="" coords="693,2145,818,2291"/>
<area shape="rect" href="classSemaphore.html" title="Defines the &quot;semaphore&quot; synchronization tool." alt="" coords="693,1837,817,2023"/>
<area shape="poly" title=" " alt="" coords="758,2023,758,2129,753,2129,753,2023"/>
<area shape="rect" href="classList.html" title="Definition of a generic single&#45;linked &quot;list&quot;." alt="" coords="688,1409,823,1715"/>
<area shape="poly" title=" " alt="" coords="758,1715,758,1821,753,1821,753,1715"/>
<area shape="rect" href="classLock.html" title="Defines the &quot;lock&quot; synchronization tool." alt="" coords="479,1827,669,2033"/>
<area shape="poly" title=" " alt="" coords="690,1700,677,1717,661,1729,647,1740,625,1775,608,1813,603,1811,621,1773,643,1737,658,1724,673,1713,686,1697"/>
<area shape="poly" title=" " alt="" coords="641,2031,703,2130,699,2133,636,2034"/>
<area shape="rect" href="classThread.html" title="Data structures for managing threads" alt="" coords="213,1409,386,1715"/>
<area shape="poly" title=" " alt="" coords="388,1677,490,1812,485,1815,384,1681"/>
<area shape="rect" href="classProcess.html" title="Defines the data structures to keep track of the execution environment of a user program." alt="" coords="422,1151,531,1277"/>
<area shape="poly" title=" " alt="" coords="448,1278,387,1396,382,1394,443,1275"/>
<area shape="rect" href="classAddrSpace.html" title="Defines the data structures to keep track of memory resources of executing user programs (address spa..." alt="" coords="471,1439,663,1685"/>
<area shape="poly" title=" " alt="" coords="470,1277,468,1330,475,1385,488,1423,483,1425,470,1386,463,1330,465,1277"/>
<area shape="rect" href="classOpenFile.html" title="Defines the data structure maintained when a file is opened." alt="" coords="595,593,727,939"/>
<area shape="poly" title=" " alt="" coords="614,940,584,1020,556,1081,524,1138,520,1136,551,1079,580,1018,609,938"/>
<area shape="rect" href="structs__mapped__file.html" title="Information describing a memory&#45;mapped file." alt="" coords="605,1171,717,1257"/>
<area shape="poly" title=" " alt="" coords="663,939,663,1155,658,1155,658,939"/>
<area shape="rect" href="classFileHeader.html" title="Defines a file header in the Nachos file system." alt="" coords="583,5,738,451"/>
<area shape="poly" title=" " alt="" coords="663,451,663,577,658,577,658,451"/>
<area shape="poly" title=" " alt="" coords="550,1440,535,1371,508,1293,513,1291,541,1370,555,1439"/>
<area shape="rect" href="classTranslationTable.html" title="Defines the data structures used for address translation." alt="" coords="741,1081,898,1347"/>
<area shape="poly" title=" " alt="" coords="769,1348,737,1387,721,1397,706,1401,692,1403,677,1412,657,1429,653,1425,674,1407,690,1398,705,1395,719,1392,734,1383,765,1345"/>
<area shape="rect" href="classPageTableEntry.html" title="Defines an entry in a simple translation table." alt="" coords="751,653,888,879"/>
<area shape="poly" title=" " alt="" coords="822,879,822,1065,817,1065,817,879"/>
<area shape="poly" title=" " alt="" coords="657,1257,647,1318,631,1386,620,1424,615,1423,626,1385,641,1317,652,1256"/>
<area shape="rect" href="classProcessStat.html" title="Defines statistics that concern a particular process." alt="" coords="375,513,570,1019"/>
<area shape="poly" title=" " alt="" coords="478,1019,479,1135,473,1135,472,1019"/>
<area shape="rect" href="structsimulatorContextT.html" title="Defines the context of the Nachos simulator." alt="" coords="5,1161,140,1267"/>
<area shape="poly" title=" " alt="" coords="74,1267,80,1325,88,1356,100,1384,121,1415,145,1444,201,1494,197,1498,142,1448,116,1419,96,1387,83,1357,75,1326,69,1267"/>
<area shape="rect" href="structthreadContextT.html" title="Defines the thread context (MIPS virtual machine)" alt="" coords="176,1161,297,1267"/>
<area shape="poly" title=" " alt="" coords="235,1267,235,1324,241,1385,242,1393,237,1394,235,1386,230,1324,230,1267"/>
<area shape="rect" href="classDisk.html" title="Defines a physical disk I/O device." alt="" coords="842,1777,991,2083"/>
<area shape="poly" title=" " alt="" coords="867,2084,846,2123,830,2144,826,2141,841,2120,862,2081"/>
</map>
</div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-methods" name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a12fc147f554a97268fab85d4013b85c5" id="r_a12fc147f554a97268fab85d4013b85c5"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDriverDisk.html#a12fc147f554a97268fab85d4013b85c5">DriverDisk</a> (<a class="el" href="classListElement.html">char</a> *<a class="el" href="classListElement.html">sem_name</a>, <a class="el" href="classListElement.html">char</a> *<a class="el" href="classListElement.html">lock_name</a>, <a class="el" href="classDisk.html">Disk</a> *<a class="el" href="classListElement.html">theDisk</a>)</td></tr>
<tr class="separator:a12fc147f554a97268fab85d4013b85c5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aef7f9b235761f441807ae26d2f6e22a7" id="r_aef7f9b235761f441807ae26d2f6e22a7"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDriverDisk.html#aef7f9b235761f441807ae26d2f6e22a7">~DriverDisk</a> ()</td></tr>
<tr class="separator:aef7f9b235761f441807ae26d2f6e22a7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1b9d0da3c599c31030b7575093799e9f" id="r_a1b9d0da3c599c31030b7575093799e9f"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classListElement.html">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDriverDisk.html#a1b9d0da3c599c31030b7575093799e9f">ReadSector</a> (<a class="el" href="classListElement.html">uint32_t</a> <a class="el" href="classListElement.html">sectorNumber</a>, <a class="el" href="classListElement.html">char</a> *<a class="el" href="classListElement.html">data</a>)</td></tr>
<tr class="separator:a1b9d0da3c599c31030b7575093799e9f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa9b87ee2b31282d03a997f88549396f6" id="r_aa9b87ee2b31282d03a997f88549396f6"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classListElement.html">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDriverDisk.html#aa9b87ee2b31282d03a997f88549396f6">WriteSector</a> (<a class="el" href="classListElement.html">uint32_t</a> <a class="el" href="classListElement.html">sectorNumber</a>, <a class="el" href="classListElement.html">char</a> *<a class="el" href="classListElement.html">data</a>)</td></tr>
<tr class="separator:aa9b87ee2b31282d03a997f88549396f6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a110084e07cf276072bf7275f22334087" id="r_a110084e07cf276072bf7275f22334087"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classListElement.html">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDriverDisk.html#a110084e07cf276072bf7275f22334087">RequestDone</a> ()</td></tr>
<tr class="separator:a110084e07cf276072bf7275f22334087"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pri-attribs" name="pri-attribs"></a>
Private Attributes</h2></td></tr>
<tr class="memitem:acbbf38dbce563287b1c0f672f26d53b2" id="r_acbbf38dbce563287b1c0f672f26d53b2"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classSemaphore.html">Semaphore</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDriverDisk.html#acbbf38dbce563287b1c0f672f26d53b2">semaphore</a></td></tr>
<tr class="separator:acbbf38dbce563287b1c0f672f26d53b2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abe1043f09602296df03e98c32a13f8b1" id="r_abe1043f09602296df03e98c32a13f8b1"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classLock.html">Lock</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDriverDisk.html#abe1043f09602296df03e98c32a13f8b1">lock</a></td></tr>
<tr class="separator:abe1043f09602296df03e98c32a13f8b1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0e6453448bb8b509ec4a17737e70fe46" id="r_a0e6453448bb8b509ec4a17737e70fe46"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classDisk.html">Disk</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDriverDisk.html#a0e6453448bb8b509ec4a17737e70fe46">disk</a></td></tr>
<tr class="separator:a0e6453448bb8b509ec4a17737e70fe46"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Defines a "synchronous" disk abstraction. </p>
<p>As with other I/O devices, the raw physical disk is an asynchronous device &ndash; requests to read or write portions of the disk (sectors) return immediately, and an interrupt occurs later to signal that the operation completed. (Also, the physical characteristics of the disk device assume that only one operation can be requested at a time).</p>
<p>This class provides the abstraction that for any individual thread making a request, it waits around until the operation finishes before returning. </p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="a12fc147f554a97268fab85d4013b85c5" name="a12fc147f554a97268fab85d4013b85c5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a12fc147f554a97268fab85d4013b85c5">&#9670;&#160;</a></span>DriverDisk()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">DriverDisk::DriverDisk </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classListElement.html">char</a> *&#160;</td>
          <td class="paramname"><em>sem_name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classListElement.html">char</a> *&#160;</td>
          <td class="paramname"><em>lock_name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classDisk.html">Disk</a> *&#160;</td>
          <td class="paramname"><em>theDisk</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Constructor. Initialize the disk driver, in turn initializing the physical disk. </p>

</div>
</div>
<a id="aef7f9b235761f441807ae26d2f6e22a7" name="aef7f9b235761f441807ae26d2f6e22a7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aef7f9b235761f441807ae26d2f6e22a7">&#9670;&#160;</a></span>~DriverDisk()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">DriverDisk::~DriverDisk </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Destructor. De-allocate data structures needed for the disk driver. </p>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="a1b9d0da3c599c31030b7575093799e9f" name="a1b9d0da3c599c31030b7575093799e9f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1b9d0da3c599c31030b7575093799e9f">&#9670;&#160;</a></span>ReadSector()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classListElement.html">void</a> DriverDisk::ReadSector </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classListElement.html">uint32_t</a>&#160;</td>
          <td class="paramname"><em>sectorNumber</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classListElement.html">char</a> *&#160;</td>
          <td class="paramname"><em>data</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Read the contents of a disk sector into a buffer. Return only after the data has been read.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">sectorNumber</td><td>the disk sector to read </td></tr>
    <tr><td class="paramname">data</td><td>the buffer to hold the contents of the disk sector </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a110084e07cf276072bf7275f22334087" name="a110084e07cf276072bf7275f22334087"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a110084e07cf276072bf7275f22334087">&#9670;&#160;</a></span>RequestDone()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classListElement.html">void</a> DriverDisk::RequestDone </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p><a class="el" href="classDisk.html" title="Defines a physical disk I/O device.">Disk</a> interrupt handler. Wake up any thread waiting for the disk request to finish. </p>

</div>
</div>
<a id="aa9b87ee2b31282d03a997f88549396f6" name="aa9b87ee2b31282d03a997f88549396f6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa9b87ee2b31282d03a997f88549396f6">&#9670;&#160;</a></span>WriteSector()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classListElement.html">void</a> DriverDisk::WriteSector </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classListElement.html">uint32_t</a>&#160;</td>
          <td class="paramname"><em>sectorNumber</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classListElement.html">char</a> *&#160;</td>
          <td class="paramname"><em>data</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Write the contents of a buffer into a disk sector. Return only after the data has been written.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">sectorNumber</td><td>the disk sector to be written </td></tr>
    <tr><td class="paramname">data</td><td>the new contents of the disk sector </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a id="a0e6453448bb8b509ec4a17737e70fe46" name="a0e6453448bb8b509ec4a17737e70fe46"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0e6453448bb8b509ec4a17737e70fe46">&#9670;&#160;</a></span>disk</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classDisk.html">Disk</a>* DriverDisk::disk</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="abe1043f09602296df03e98c32a13f8b1" name="abe1043f09602296df03e98c32a13f8b1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abe1043f09602296df03e98c32a13f8b1">&#9670;&#160;</a></span>lock</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classLock.html">Lock</a>* DriverDisk::lock</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Mutual exclusion on the disk device </p>

</div>
</div>
<a id="acbbf38dbce563287b1c0f672f26d53b2" name="acbbf38dbce563287b1c0f672f26d53b2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acbbf38dbce563287b1c0f672f26d53b2">&#9670;&#160;</a></span>semaphore</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classSemaphore.html">Semaphore</a>* DriverDisk::semaphore</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>To synchronize requesting thread with the interrupt handler </p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>drivers/<a class="el" href="drvDisk_8h_source.html">drvDisk.h</a></li>
<li>drivers/<a class="el" href="drvDisk_8cc.html">drvDisk.cc</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.8
</small></address>
</body>
</html>
