<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Nachos: filesys/filesys.cc File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">Nachos
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.8 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_386a01e8c60160d2cb79aec927decd2f.html">filesys</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#define-members">Macros</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle"><div class="title">filesys.cc File Reference</div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &quot;<a class="el" href="system_8h_source.html">kernel/system.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="msgerror_8h_source.html">kernel/msgerror.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="disk_8h_source.html">machine/disk.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="config_8h_source.html">utility/config.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="bitmap_8h_source.html">utility/bitmap.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="directory_8h_source.html">filesys/directory.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="filehdr_8h_source.html">filesys/filehdr.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="filesys_8h_source.html">filesys/filesys.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="oftable_8h_source.html">filesys/oftable.h</a>&quot;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for filesys.cc:</div>
<div class="dyncontent">
<div class="center"><img src="filesys_8cc__incl.png" border="0" usemap="#afilesys_2filesys_8cc" alt=""/></div>
<map name="afilesys_2filesys_8cc" id="afilesys_2filesys_8cc">
<area shape="rect" title="Routines to manage the overall operation of the file system." alt="" coords="756,5,884,31"/>
<area shape="rect" href="system_8h.html" title="Global variables used in Nachos." alt="" coords="77,665,203,691"/>
<area shape="poly" title=" " alt="" coords="756,24,443,42,276,58,208,69,157,81,104,94,57,104,39,112,25,123,17,140,13,164,13,533,16,553,23,572,46,606,77,635,108,656,105,661,74,639,42,610,18,574,11,554,8,533,8,163,11,138,21,120,36,107,56,99,103,88,155,76,207,64,276,53,443,36,755,19"/>
<area shape="rect" href="msgerror_8h.html" title="Defines the data structure to store error messages during." alt="" coords="1475,79,1611,104"/>
<area shape="poly" title=" " alt="" coords="884,22,1135,44,1456,76,1461,77,1461,82,1456,81,1135,49,884,27"/>
<area shape="rect" href="disk_8h.html" title="Data structures to emulate a physical disk." alt="" coords="1171,372,1293,397"/>
<area shape="poly" title=" " alt="" coords="884,18,1038,27,1129,36,1221,49,1305,68,1374,92,1401,107,1422,123,1435,142,1440,163,1440,240,1436,265,1426,288,1410,308,1390,325,1343,352,1295,371,1293,366,1341,347,1387,321,1406,304,1421,285,1431,264,1435,239,1435,164,1430,144,1418,127,1398,111,1372,97,1303,73,1220,54,1128,41,1037,32,884,23"/>
<area shape="rect" href="config_8h.html" title="Data structures for setting up the Nachos hardware and." alt="" coords="207,445,321,471"/>
<area shape="poly" title=" " alt="" coords="756,21,642,23,506,31,440,38,381,49,332,63,298,81,280,98,271,116,267,137,267,163,267,313,267,432,261,432,261,313,261,163,262,136,266,114,275,95,294,77,330,58,380,44,439,33,506,25,642,17,756,16"/>
<area shape="rect" href="filesys_8h.html" title="Data structures to represent the Nachos file system." alt="" coords="200,519,323,544"/>
<area shape="poly" title=" " alt="" coords="756,22,582,26,476,33,369,45,270,63,189,88,158,104,134,121,120,141,115,164,115,386,117,407,125,427,152,462,187,490,223,510,220,515,184,494,148,466,121,430,112,409,109,386,109,163,115,139,131,118,155,99,187,83,269,58,368,40,475,28,582,21,756,16"/>
<area shape="rect" href="bitmap_8h.html" title="Data structures defining a bitmap." alt="" coords="448,519,571,544"/>
<area shape="poly" title=" " alt="" coords="756,27,630,41,485,67,419,85,366,107,345,120,330,134,321,148,317,164,317,239,322,283,336,325,356,365,381,402,436,464,485,508,481,512,433,468,377,405,352,368,331,327,317,284,312,239,312,163,316,146,326,130,342,116,363,103,418,80,484,62,629,35,756,21"/>
<area shape="rect" href="directory_8h.html" title="Data structures to manage a UNIX&#45;like directory of file names." alt="" coords="1019,519,1155,544"/>
<area shape="poly" title=" " alt="" coords="854,28,895,47,939,76,958,94,974,115,984,138,988,163,988,239,991,279,998,318,1021,393,1049,458,1075,505,1070,508,1045,460,1016,395,992,319,985,279,983,239,983,164,979,139,969,117,954,98,935,80,892,52,852,33"/>
<area shape="rect" href="filehdr_8h.html" title="Data structures for managing a disk file header." alt="" coords="1073,299,1193,324"/>
<area shape="poly" title=" " alt="" coords="885,25,946,43,978,58,1006,77,1030,100,1052,127,1088,184,1113,240,1129,284,1124,286,1108,242,1083,187,1048,130,1026,104,1002,81,975,62,945,48,883,30"/>
<area shape="rect" href="oftable_8h.html" title="Data structure used to synchronize operations on files." alt="" coords="757,79,883,104"/>
<area shape="poly" title=" " alt="" coords="823,31,823,65,817,65,817,31"/>
<area shape="rect" title=" " alt="" coords="23,1032,89,1057"/>
<area shape="poly" title=" " alt="" coords="130,693,109,715,85,746,66,783,59,824,59,899,59,1018,53,1018,53,899,53,823,61,781,81,743,105,711,126,689"/>
<area shape="rect" title=" " alt="" coords="122,1032,193,1057"/>
<area shape="poly" title=" " alt="" coords="138,692,120,748,113,785,109,823,109,899,113,933,122,965,146,1019,141,1021,117,967,108,934,104,899,104,823,107,784,115,746,133,690"/>
<area shape="rect" title=" " alt="" coords="144,812,195,837"/>
<area shape="poly" title=" " alt="" coords="145,691,167,798,162,799,140,692"/>
<area shape="rect" href="list_8h.html" title="Data structures to manage LISP&#45;like lists." alt="" coords="832,812,928,837"/>
<area shape="poly" title=" " alt="" coords="199,688,819,809,818,814,198,693"/>
<area shape="rect" href="objaddr_8h.html" title="Object address data structure." alt="" coords="203,739,327,764"/>
<area shape="poly" title=" " alt="" coords="155,688,227,730,225,735,152,693"/>
<area shape="rect" href="copyright_8h.html" title="Nachos copyright notice." alt="" coords="963,1032,1101,1057"/>
<area shape="poly" title=" " alt="" coords="890,836,1018,1019,1014,1022,886,839"/>
<area shape="rect" href="utility_8h.html" title="Miscellaneous useful definitions, including debugging routines." alt="" coords="599,885,711,911"/>
<area shape="poly" title=" " alt="" coords="845,840,705,884,703,879,843,835"/>
<area shape="poly" title=" " alt="" coords="598,902,495,904,372,912,312,920,259,930,215,944,184,961,174,973,167,988,160,1019,155,1018,162,986,170,970,181,957,213,939,257,925,312,914,372,907,495,898,598,896"/>
<area shape="poly" title=" " alt="" coords="654,911,648,947,651,966,659,982,678,996,706,1008,781,1025,867,1035,949,1039,949,1045,867,1040,780,1030,704,1013,675,1001,655,986,646,967,643,947,648,910"/>
<area shape="rect" title=" " alt="" coords="670,959,757,984"/>
<area shape="poly" title=" " alt="" coords="666,909,697,947,693,950,662,913"/>
<area shape="rect" href="sysdep_8h.html" title="System&#45;dependent interface." alt="" coords="195,959,335,984"/>
<area shape="poly" title=" " alt="" coords="599,912,342,959,341,954,598,907"/>
<area shape="poly" title=" " alt="" coords="233,987,104,1030,102,1025,231,981"/>
<area shape="poly" title=" " alt="" coords="249,986,188,1027,185,1022,247,982"/>
<area shape="poly" title=" " alt="" coords="336,979,355,981,684,1013,949,1034,949,1040,684,1018,354,987,335,984"/>
<area shape="rect" title=" " alt="" coords="230,1032,301,1057"/>
<area shape="poly" title=" " alt="" coords="268,984,268,1018,263,1018,263,984"/>
<area shape="poly" title=" " alt="" coords="250,741,178,699,180,695,253,736"/>
<area shape="poly" title=" " alt="" coords="251,766,198,806,195,801,248,762"/>
<area shape="poly" title=" " alt="" coords="328,757,819,814,818,819,327,762"/>
<area shape="poly" title=" " alt="" coords="271,764,285,807,311,868,330,900,351,931,377,959,407,982,449,1000,507,1014,577,1025,655,1033,814,1041,949,1042,949,1047,814,1046,654,1038,577,1030,506,1020,447,1005,404,986,374,963,347,934,325,903,306,870,280,809,266,765"/>
<area shape="poly" title=" " alt="" coords="297,762,612,878,610,883,296,767"/>
<area shape="poly" title=" " alt="" coords="1246,396,1276,426,1313,472,1350,528,1365,559,1376,591,1384,641,1376,691,1367,716,1356,740,1338,781,1333,799,1331,823,1331,899,1330,926,1326,948,1316,967,1298,986,1267,1003,1221,1016,1116,1036,1115,1031,1220,1011,1265,998,1294,982,1312,964,1321,946,1325,926,1325,899,1325,823,1327,798,1333,779,1351,738,1362,714,1371,690,1378,641,1371,593,1360,561,1345,531,1309,475,1272,430,1242,399"/>
<area shape="poly" title=" " alt="" coords="1237,397,1240,426,1241,466,1233,508,1225,528,1213,546,1195,562,1177,572,1139,577,1101,579,1080,584,1059,594,1005,628,990,647,984,677,984,753,982,780,975,802,962,821,941,840,904,858,848,872,725,892,724,887,847,867,902,852,939,835,958,817,971,800,977,779,979,753,979,676,985,645,1002,624,1056,590,1078,579,1100,573,1139,571,1175,567,1192,558,1209,542,1220,525,1228,506,1235,465,1235,427,1232,398"/>
<area shape="poly" title=" " alt="" coords="249,473,187,521,148,558,107,601,69,650,38,704,16,762,10,793,8,823,8,899,12,933,21,965,45,1019,40,1021,16,967,6,934,3,899,3,823,5,792,11,761,33,702,65,647,103,598,144,554,184,517,246,469"/>
<area shape="rect" href="translationtable_8h.html" title="Data structures for managing address translation" alt="" coords="1069,592,1267,617"/>
<area shape="poly" title=" " alt="" coords="322,461,534,480,668,496,803,516,974,551,1114,586,1112,591,972,556,802,521,668,501,534,485,321,466"/>
<area shape="poly" title=" " alt="" coords="266,471,265,505,260,505,261,471"/>
<area shape="poly" title=" " alt="" coords="1168,618,1159,675,1153,750,1153,899,1151,920,1144,940,1122,975,1093,1004,1064,1027,1061,1022,1090,1000,1118,972,1139,938,1146,919,1148,899,1148,750,1154,674,1163,617"/>
<area shape="poly" title=" " alt="" coords="1163,619,1080,740,1033,805,1002,840,951,859,879,874,725,894,724,888,878,869,950,854,998,835,1029,802,1076,737,1158,616"/>
<area shape="poly" title=" " alt="" coords="269,543,370,778,435,912,462,959,482,982,517,998,567,1011,692,1029,830,1038,949,1041,949,1046,829,1043,692,1034,566,1016,515,1003,478,986,458,962,430,915,365,781,264,545"/>
<area shape="rect" href="openfile_8h.html" title="Data structures to manipulate files." alt="" coords="355,592,487,617"/>
<area shape="poly" title=" " alt="" coords="288,542,384,584,382,589,286,546"/>
<area shape="poly" title=" " alt="" coords="377,620,199,664,198,659,375,615"/>
<area shape="poly" title=" " alt="" coords="422,618,417,683,417,730,421,782,431,837,447,891,473,940,508,982,530,992,570,1001,688,1017,949,1037,949,1042,687,1022,569,1006,528,997,505,986,468,943,442,893,426,838,416,783,412,730,412,682,417,617"/>
<area shape="poly" title=" " alt="" coords="433,616,639,873,635,876,428,619"/>
<area shape="poly" title=" " alt="" coords="514,544,523,601,528,677,528,899,531,914,540,928,573,953,622,975,684,993,823,1019,949,1034,949,1040,822,1025,683,998,621,980,570,958,536,931,526,916,523,900,523,677,517,601,509,545"/>
<area shape="poly" title=" " alt="" coords="519,543,546,591,580,670,610,749,650,871,645,873,605,751,575,672,542,593,515,545"/>
<area shape="poly" title=" " alt="" coords="497,546,448,585,445,581,494,542"/>
<area shape="poly" title=" " alt="" coords="1155,540,1273,568,1339,590,1405,620,1464,657,1490,679,1512,703,1531,729,1545,758,1554,789,1557,823,1557,900,1554,917,1544,932,1528,947,1508,960,1455,982,1391,1000,1246,1026,1115,1040,1114,1035,1245,1021,1389,995,1453,977,1505,955,1525,942,1540,929,1549,915,1552,899,1552,823,1549,790,1540,760,1527,732,1508,706,1486,682,1461,661,1402,624,1337,595,1271,573,1154,545"/>
<area shape="poly" title=" " alt="" coords="1019,543,501,598,501,592,1018,537"/>
<area shape="poly" title=" " alt="" coords="1138,324,1147,357,1161,396,1193,452,1226,491,1256,532,1270,558,1281,591,1282,605,1281,617,1280,823,1280,900,1276,927,1264,951,1246,972,1224,990,1171,1016,1115,1032,1114,1027,1169,1011,1221,985,1243,968,1260,948,1271,926,1275,899,1275,823,1276,617,1277,605,1276,593,1265,560,1252,535,1222,494,1189,455,1156,398,1142,359,1133,325"/>
<area shape="poly" title=" " alt="" coords="1151,322,1206,362,1203,366,1148,326"/>
<area shape="poly" title=" " alt="" coords="1110,327,1033,361,937,400,732,468,565,518,563,512,730,463,935,395,1031,356,1108,322"/>
<area shape="poly" title=" " alt="" coords="807,106,751,154,665,230,600,291,541,357,471,447,443,481,433,497,424,519,419,549,420,578,415,578,414,549,419,518,428,495,439,478,467,444,537,353,597,287,662,226,748,150,804,102"/>
<area shape="poly" title=" " alt="" coords="838,102,1107,289,1104,293,835,106"/>
<area shape="rect" href="synch_8h.html" title="Data structures for synchronizing threads." alt="" coords="762,152,878,177"/>
<area shape="poly" title=" " alt="" coords="823,104,823,138,817,138,817,104"/>
<area shape="poly" title=" " alt="" coords="762,173,578,191,462,208,345,230,237,258,147,293,112,313,86,335,70,358,64,384,64,532,70,568,84,601,103,630,121,653,117,657,98,633,79,603,65,569,59,533,59,383,65,356,82,331,109,309,145,288,235,253,344,225,462,203,577,186,761,167"/>
<area shape="poly" title=" " alt="" coords="841,175,909,221,1003,297,1052,344,1098,397,1138,455,1169,518,1174,534,1174,548,1170,560,1162,569,1139,581,1110,587,1048,590,1025,591,1012,594,988,617,966,643,931,700,906,755,890,799,885,798,901,753,926,697,962,640,984,613,1009,590,1024,586,1048,585,1109,582,1138,576,1159,565,1165,558,1169,548,1169,535,1164,520,1134,458,1094,400,1048,348,1000,301,906,225,838,180"/>
<area shape="poly" title=" " alt="" coords="878,165,1229,182,1471,198,1726,219,1967,248,2075,265,2171,284,2251,305,2312,328,2351,354,2362,368,2365,383,2365,900,2362,924,2352,943,2337,955,2318,964,2272,975,2219,987,2152,998,2038,1008,1722,1025,1115,1044,1115,1039,1722,1020,2037,1003,2151,993,2218,981,2271,970,2316,959,2334,951,2348,939,2357,923,2360,899,2360,384,2357,370,2347,358,2309,333,2249,310,2170,289,2074,270,1967,253,1725,225,1471,203,1228,187,878,171"/>
<area shape="rect" href="thread_8h.html" title="Data structures for managing threads." alt="" coords="760,225,880,251"/>
<area shape="poly" title=" " alt="" coords="823,178,823,212,817,212,817,178"/>
<area shape="poly" title=" " alt="" coords="760,243,640,253,566,265,487,284,407,310,330,345,258,390,226,417,197,447,179,471,166,497,149,553,142,608,141,651,136,651,137,607,144,552,161,495,175,468,193,444,222,413,255,386,327,340,405,305,485,279,565,260,639,248,760,238"/>
<area shape="poly" title=" " alt="" coords="880,238,1278,253,1549,270,1825,296,1909,298,1993,289,2150,266,2216,264,2244,269,2268,279,2288,294,2302,317,2312,346,2315,383,2315,900,2310,929,2297,950,2277,963,2252,971,2191,977,2124,987,2035,1002,1917,1015,1631,1033,1339,1042,1115,1045,1115,1040,1339,1037,1630,1027,1916,1010,2034,997,2124,981,2191,972,2251,965,2275,958,2293,946,2305,927,2309,899,2309,383,2306,347,2298,319,2284,298,2265,283,2242,274,2215,269,2151,271,1994,294,1909,303,1825,301,1549,275,1277,258,880,243"/>
<area shape="poly" title=" " alt="" coords="760,249,700,267,670,281,644,301,627,319,617,337,612,357,611,383,611,459,616,559,628,635,643,712,655,812,657,871,652,872,649,812,637,713,623,636,610,559,605,459,605,383,607,356,612,335,623,316,641,297,668,277,698,262,759,244"/>
<area shape="rect" href="machine_8h.html" title="Data structures to simulate the RISC V machine." alt="" coords="1662,299,1813,324"/>
<area shape="poly" title=" " alt="" coords="880,241,1649,300,1648,306,880,247"/>
<area shape="rect" href="stats_8h.html" title="Data structures for gathering statistics about Nachos performance." alt="" coords="817,372,925,397"/>
<area shape="poly" title=" " alt="" coords="826,250,848,323,862,358,857,360,843,325,820,252"/>
<area shape="rect" href="process_8h.html" title="A process keeps track of the resources used by a running Nachos program." alt="" coords="655,299,783,324"/>
<area shape="poly" title=" " alt="" coords="805,253,748,293,745,288,802,248"/>
<area shape="rect" title=" " alt="" coords="857,299,948,324"/>
<area shape="poly" title=" " alt="" coords="835,249,880,287,877,292,832,253"/>
<area shape="poly" title=" " alt="" coords="1813,315,2010,334,2105,349,2144,359,2173,370,2208,385,2237,401,2257,422,2262,438,2264,457,2264,900,2261,911,2253,922,2225,941,2180,958,2122,972,1972,997,1792,1015,1599,1028,1411,1037,1115,1045,1115,1040,1411,1032,1599,1023,1792,1010,1971,992,2121,967,2178,953,2222,936,2250,918,2256,909,2259,899,2259,457,2257,439,2252,425,2234,405,2206,390,2171,374,2142,364,2104,355,2009,339,1812,320"/>
<area shape="poly" title=" " alt="" coords="1662,326,1312,375,1306,375,1306,370,1312,369,1661,321"/>
<area shape="poly" title=" " alt="" coords="1662,319,1580,326,1491,337,1411,353,1380,363,1357,374,1336,393,1322,412,1307,454,1294,498,1282,522,1263,546,1236,569,1207,588,1204,583,1233,565,1259,542,1277,519,1289,496,1302,452,1317,410,1332,389,1355,370,1378,358,1410,347,1490,331,1580,321,1662,314"/>
<area shape="rect" title=" " alt="" coords="1763,372,1834,397"/>
<area shape="poly" title=" " alt="" coords="1749,323,1782,360,1778,363,1745,326"/>
<area shape="rect" title=" " alt="" coords="1973,445,2032,471"/>
<area shape="poly" title=" " alt="" coords="1813,312,1889,317,1970,327,2041,344,2068,356,2086,370,2092,380,2093,391,2083,410,2064,427,2042,441,2039,436,2061,422,2079,407,2087,390,2087,382,2082,374,2065,360,2039,349,1969,332,1889,322,1813,317"/>
<area shape="rect" title=" " alt="" coords="2070,445,2149,471"/>
<area shape="poly" title=" " alt="" coords="1813,311,1894,316,1981,326,2058,343,2087,355,2107,370,2116,384,2120,401,2118,432,2113,432,2114,401,2111,386,2103,374,2085,360,2056,348,1981,331,1894,321,1813,317"/>
<area shape="rect" title=" " alt="" coords="1861,445,1936,471"/>
<area shape="poly" title=" " alt="" coords="1769,322,1809,341,1849,370,1873,400,1890,431,1886,434,1869,403,1845,374,1806,346,1767,326"/>
<area shape="rect" title=" " alt="" coords="1369,372,1437,397"/>
<area shape="poly" title=" " alt="" coords="1680,327,1451,374,1450,369,1679,321"/>
<area shape="rect" href="instruction_8h.html" title="composition of instructioninterface of instruction class" alt="" coords="1909,372,2072,397"/>
<area shape="poly" title=" " alt="" coords="1779,321,1937,366,1936,371,1777,327"/>
<area shape="poly" title=" " alt="" coords="1662,321,939,380,938,375,1662,316"/>
<area shape="rect" href="mmu_8h.html" title="Data structures for the MMU (Memory Management Unit)" alt="" coords="1461,372,1589,397"/>
<area shape="poly" title=" " alt="" coords="1704,327,1573,370,1572,365,1702,321"/>
<area shape="rect" href="ACIA_8h.html" title="Data Structures to emulate an ACIA device." alt="" coords="1613,372,1739,397"/>
<area shape="poly" title=" " alt="" coords="1729,326,1697,363,1693,360,1725,323"/>
<area shape="rect" href="interrupt_8h.html" title="Data structures to emulate low&#45;level interrupt hardware." alt="" coords="1366,739,1517,764"/>
<area shape="poly" title=" " alt="" coords="1813,316,1988,335,2072,350,2130,370,2163,386,2189,402,2207,424,2213,456,2213,607,2207,620,2191,633,2134,656,2049,677,1947,696,1722,726,1531,745,1530,740,1722,721,1946,691,2048,672,2132,651,2188,628,2203,617,2208,605,2208,457,2202,426,2186,406,2160,390,2128,374,2070,356,1987,340,1813,321"/>
<area shape="poly" title=" " alt="" coords="1995,397,2001,431,1996,432,1990,398"/>
<area shape="poly" title=" " alt="" coords="2011,395,2079,436,2077,440,2008,400"/>
<area shape="poly" title=" " alt="" coords="1978,399,1926,439,1923,435,1974,395"/>
<area shape="poly" title=" " alt="" coords="874,398,882,798,877,798,868,398"/>
<area shape="poly" title=" " alt="" coords="867,399,845,455,836,492,832,530,832,606,827,649,815,692,797,731,774,769,725,833,681,877,677,874,720,829,770,766,792,729,810,690,822,648,827,606,827,530,831,491,840,453,862,397"/>
<area shape="poly" title=" " alt="" coords="817,395,335,451,335,446,816,390"/>
<area shape="poly" title=" " alt="" coords="1366,765,942,818,941,813,1365,760"/>
<area shape="poly" title=" " alt="" coords="1443,764,1437,807,1422,867,1410,900,1394,931,1373,961,1348,986,1308,1006,1249,1021,1116,1039,1115,1034,1248,1015,1306,1001,1345,982,1369,957,1389,929,1405,897,1417,865,1432,806,1438,764"/>
<area shape="poly" title=" " alt="" coords="732,322,904,502,995,608,1024,649,1035,676,1035,899,1035,1018,1029,1018,1029,899,1029,677,1019,652,991,611,900,506,728,326"/>
<area shape="poly" title=" " alt="" coords="692,326,637,353,567,395,496,451,465,484,438,520,427,549,423,578,418,578,422,548,434,517,461,480,493,447,564,391,634,349,690,322"/>
<area shape="poly" title=" " alt="" coords="718,297,727,263,746,224,766,201,788,183,791,187,769,205,750,227,732,265,723,299"/>
<area shape="poly" title=" " alt="" coords="744,322,835,364,833,369,742,326"/>
<area shape="rect" href="addrspace_8h.html" title="Data structures to keep track of the memory resources of executing user programs (address spaces)." alt="" coords="646,519,791,544"/>
<area shape="poly" title=" " alt="" coords="721,324,721,504,716,504,716,324"/>
<area shape="poly" title=" " alt="" coords="727,543,869,799,865,801,723,545"/>
<area shape="poly" title=" " alt="" coords="723,544,732,592,751,667,781,753,800,796,822,836,866,894,916,947,966,990,1006,1022,1003,1026,962,994,913,950,862,898,818,839,795,798,776,755,746,669,727,594,718,545"/>
<area shape="poly" title=" " alt="" coords="672,547,483,591,482,586,670,541"/>
</map>
</div>
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="define-members" name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:acfabd79a397da2bebf0645af84a9885c" id="r_acfabd79a397da2bebf0645af84a9885c"><td class="memItemLeft" align="right" valign="top">#<a class="el" href="classListElement.html">define</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="filesys_8cc.html#acfabd79a397da2bebf0645af84a9885c">FreeMapSector</a>&#160;&#160;&#160;0</td></tr>
<tr class="separator:acfabd79a397da2bebf0645af84a9885c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1e8a87bff0b10df73c4c8aebd74cd115" id="r_a1e8a87bff0b10df73c4c8aebd74cd115"><td class="memItemLeft" align="right" valign="top">#<a class="el" href="classListElement.html">define</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="filesys_8cc.html#a1e8a87bff0b10df73c4c8aebd74cd115">DirectorySector</a>&#160;&#160;&#160;1</td></tr>
<tr class="separator:a1e8a87bff0b10df73c4c8aebd74cd115"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:adf9153e1a224b6785fb5e88446cfc332" id="r_adf9153e1a224b6785fb5e88446cfc332"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classListElement.html">bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="filesys_8cc.html#adf9153e1a224b6785fb5e88446cfc332">decompname</a> (<a class="el" href="classListElement.html">const</a> <a class="el" href="classListElement.html">char</a> *<a class="el" href="classListElement.html">orig_path</a>, <a class="el" href="classListElement.html">char</a> *<a class="el" href="classListElement.html">head</a>, <a class="el" href="classListElement.html">char</a> *<a class="el" href="classListElement.html">tail</a>)</td></tr>
<tr class="separator:adf9153e1a224b6785fb5e88446cfc332"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6aea4042690035ff4b4b4531ccca4dc1" id="r_a6aea4042690035ff4b4b4531ccca4dc1"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classListElement.html">int</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="filesys_8cc.html#a6aea4042690035ff4b4b4531ccca4dc1">FindDir</a> (<a class="el" href="classListElement.html">char</a> *name)</td></tr>
<tr class="separator:a6aea4042690035ff4b4b4531ccca4dc1"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Routines to manage the overall operation of the file system. </p>
<p>Implements routines to map from textual file names to files.</p>
<p>Each file in the file system has:</p><ul>
<li>A file header, stored in a sector on disk (the size of the file header data structure is arranged to be precisely the size of 1 disk sector)</li>
<li>A number of data blocks</li>
<li>An entry in the file system directory</li>
</ul>
<p>The file system consists of several data structures:</p><ul>
<li>A bitmap of free disk sectors (cf. <a class="el" href="classListElement.html#afc3cc3f75c7b66aca68c64c61f7c034f">bitmap.h</a>)</li>
<li>A directory of file names and file headers</li>
</ul>
<p>Both the bitmap and the directory are represented as normal files. Their file headers are located in specific sectors (sector 0 and sector 1), so that the file system can find them on bootup.</p>
<p>The file system assumes that the bitmap and directory files are kept "open" continuously while Nachos is running.</p>
<p>For those operations (such as Create, Remove) that modify the directory and/or bitmap, if the operation succeeds, the changes are written immediately back to disk (the two files are kept open during all this time). If the operation fails, and we have modified part of the directory and/or bitmap, we simply discard the changed version, without writing it back to disk.</p>
<p>Our implementation at this point has the following restrictions:</p>
<ul>
<li>there is no synchronization for concurrent accesses</li>
<li>there is no hierarchical directory structure, and only a limited number of files can be added to the system</li>
<li>there is no attempt to make the system robust to failures (if Nachos exits in the middle of an operation that modifies the file system, it may corrupt the disk)</li>
</ul>
<p>Points 1 and 2 are removed in the file system assignment</p>
<hr  />
<p> This file is part of the Nachos-RiscV distribution Copyright (c) 2022 University of Rennes 1.</p>
<p>This program is free software: you can redistribute it and/or modify <br  />
 it under the terms of the GNU General Public License as published by <br  />
 the Free Software Foundation, version 3.</p>
<p>This program is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for more details </p>
<h2><a class="anchor" id="autotoc_md9"></a>
(see see &lt;http://www.gnu.org/licenses/&gt;).</h2>
</div><h2 class="groupheader">Macro Definition Documentation</h2>
<a id="a1e8a87bff0b10df73c4c8aebd74cd115" name="a1e8a87bff0b10df73c4c8aebd74cd115"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1e8a87bff0b10df73c4c8aebd74cd115">&#9670;&#160;</a></span>DirectorySector</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#<a class="el" href="classListElement.html">define</a> DirectorySector&#160;&#160;&#160;1</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="acfabd79a397da2bebf0645af84a9885c" name="acfabd79a397da2bebf0645af84a9885c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acfabd79a397da2bebf0645af84a9885c">&#9670;&#160;</a></span>FreeMapSector</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#<a class="el" href="classListElement.html">define</a> FreeMapSector&#160;&#160;&#160;0</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Sectors containing the file headers for the bitmap of free sectors, and the directory of files. These file headers are placed in well-known sectors, so that they can be located on boot-up. </p>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="adf9153e1a224b6785fb5e88446cfc332" name="adf9153e1a224b6785fb5e88446cfc332"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adf9153e1a224b6785fb5e88446cfc332">&#9670;&#160;</a></span>decompname()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classListElement.html">bool</a> decompname </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classListElement.html">const</a> <a class="el" href="classListElement.html">char</a> *&#160;</td>
          <td class="paramname"><em>orig_path</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classListElement.html">char</a> *&#160;</td>
          <td class="paramname"><em>head</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classListElement.html">char</a> *&#160;</td>
          <td class="paramname"><em>tail</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>this function returns the name of the first directory in the path given in argument, as well as the remainder of the path if we call decompname("/bin/new/halt",head,tail), we get "bin" in head and "/new/halt" in tail</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">orig_path</td><td>: the pathname we want to decompose </td></tr>
    <tr><td class="paramname">head</td><td>: the first element in the path (for instance bin) </td></tr>
    <tr><td class="paramname">tail</td><td>: the remainder of the string (for instance /new/halt) </td></tr>
  </table>
  </dd>
</dl>
<dl class="section note"><dt>Note</dt><dd>tail MAY point to the address of orig_path, in which case orig_path is altered </dd></dl>
<dl class="section return"><dt>Returns</dt><dd>true if everything goes ok, otherwise, return false. </dd></dl>
<dl class="section note"><dt>Note</dt><dd>head and tail MUST be large enough to contain the resulting strings </dd></dl>

</div>
</div>
<a id="a6aea4042690035ff4b4b4531ccca4dc1" name="a6aea4042690035ff4b4b4531ccca4dc1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6aea4042690035ff4b4b4531ccca4dc1">&#9670;&#160;</a></span>FindDir()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classListElement.html">int</a> FindDir </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classListElement.html">char</a> *&#160;</td>
          <td class="paramname"><em>name</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>this function takes a complete pathname and returns the disc sector of the fileheader of the directory.</p>
<p>IMPORTANT WARNING : name is modified : after the execution name contains only the name of the file (<a class="el" href="classListElement.html#afc3cc3f75c7b66aca68c64c61f7c034f">e.g</a>. if we called FindDir("/bin/halt") then name is "halt" after the execution, the function returns the sector number of the directory "/bin").</p>
<p>Actually, this function does not support complete pathnames This is one of the objectives of the file system assignment</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">name</td><td>is the complete name (relatively to the root directory). The contents of this string will be modified! </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>the sector number of the directory, or ERROR in case of an error </dd></dl>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.8
</small></address>
</body>
</html>
