<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Nachos: kernel/scheduler.cc File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">Nachos
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.8 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_dc43877d82dd332f9fb2071fcca799d6.html">kernel</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="headertitle"><div class="title">scheduler.cc File Reference</div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &quot;<a class="el" href="scheduler_8h_source.html">kernel/scheduler.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="system_8h_source.html">kernel/system.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="thread_8h_source.html">kernel/thread.h</a>&quot;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for scheduler.cc:</div>
<div class="dyncontent">
<div class="center"><img src="scheduler_8cc__incl.png" border="0" usemap="#akernel_2scheduler_8cc" alt=""/></div>
<map name="akernel_2scheduler_8cc" id="akernel_2scheduler_8cc">
<area shape="rect" title="Routines to choose the next thread to run, and to dispatch to that thread." alt="" coords="605,5,752,31"/>
<area shape="rect" href="scheduler_8h.html" title="Defines the Nachos scheduler." alt="" coords="2115,592,2255,617"/>
<area shape="poly" title=" " alt="" coords="752,16,1098,18,1328,23,1566,34,1791,52,1891,64,1979,78,2053,94,2109,114,2145,136,2155,149,2159,163,2159,459,2166,524,2180,578,2175,580,2161,525,2153,459,2153,164,2150,152,2142,140,2107,119,2051,99,1978,83,1890,69,1790,57,1566,40,1328,29,1098,23,752,21"/>
<area shape="rect" href="system_8h.html" title="Global variables used in Nachos." alt="" coords="169,519,295,544"/>
<area shape="poly" title=" " alt="" coords="605,27,478,42,336,68,272,86,220,108,185,134,176,148,173,164,173,386,178,420,189,453,218,506,213,509,184,455,173,421,168,386,168,163,172,146,182,130,217,104,270,81,334,63,477,37,604,22"/>
<area shape="rect" href="thread_8h.html" title="Data structures for managing threads." alt="" coords="619,79,739,104"/>
<area shape="poly" title=" " alt="" coords="681,31,681,65,676,65,676,31"/>
<area shape="rect" href="copyright_8h.html" title="Nachos copyright notice." alt="" coords="877,885,1016,911"/>
<area shape="poly" title=" " alt="" coords="2188,618,2183,661,2170,723,2159,755,2144,787,2123,816,2097,840,2049,851,1948,861,1643,878,1030,897,1030,892,1643,873,1947,856,2048,846,2095,835,2119,812,2139,784,2154,753,2165,721,2178,660,2182,617"/>
<area shape="rect" href="list_8h.html" title="Data structures to manage LISP&#45;like lists." alt="" coords="664,665,760,691"/>
<area shape="poly" title=" " alt="" coords="2115,611,1599,632,873,668,774,675,773,669,873,663,1598,627,2115,606"/>
<area shape="poly" title=" " alt="" coords="720,689,762,756,794,798,831,835,867,859,904,878,901,883,864,864,828,839,790,801,757,759,716,692"/>
<area shape="rect" href="utility_8h.html" title="Miscellaneous useful definitions, including debugging routines." alt="" coords="368,739,480,764"/>
<area shape="poly" title=" " alt="" coords="666,693,484,738,483,733,665,688"/>
<area shape="poly" title=" " alt="" coords="426,764,431,800,438,819,451,835,481,852,523,866,575,876,633,884,755,892,864,895,863,900,755,898,632,889,574,881,522,871,478,857,448,839,434,822,426,801,421,764"/>
<area shape="rect" title=" " alt="" coords="122,885,193,911"/>
<area shape="poly" title=" " alt="" coords="368,763,262,783,215,797,184,814,175,826,168,841,161,872,156,871,163,840,170,824,181,810,213,792,261,777,367,757"/>
<area shape="rect" title=" " alt="" coords="462,812,549,837"/>
<area shape="poly" title=" " alt="" coords="439,762,484,801,480,805,435,766"/>
<area shape="rect" href="sysdep_8h.html" title="System&#45;dependent interface." alt="" coords="195,812,335,837"/>
<area shape="poly" title=" " alt="" coords="400,766,305,809,303,804,397,762"/>
<area shape="poly" title=" " alt="" coords="336,832,355,835,864,886,863,892,354,840,335,838"/>
<area shape="poly" title=" " alt="" coords="249,840,188,880,185,875,247,835"/>
<area shape="rect" title=" " alt="" coords="23,885,89,911"/>
<area shape="poly" title=" " alt="" coords="233,840,104,883,102,878,231,835"/>
<area shape="rect" title=" " alt="" coords="230,885,301,911"/>
<area shape="poly" title=" " alt="" coords="268,838,268,872,263,872,263,838"/>
<area shape="poly" title=" " alt="" coords="271,542,662,659,660,664,269,547"/>
<area shape="poly" title=" " alt="" coords="212,546,181,567,147,597,120,634,112,655,109,677,109,753,113,786,122,818,146,872,141,874,117,820,108,787,104,753,104,676,107,653,116,631,143,593,178,563,209,542"/>
<area shape="poly" title=" " alt="" coords="197,547,153,565,108,593,88,610,73,630,62,652,59,677,59,753,59,872,53,872,53,753,53,676,57,650,68,627,85,606,105,588,151,560,194,542"/>
<area shape="rect" title=" " alt="" coords="159,665,209,691"/>
<area shape="poly" title=" " alt="" coords="222,546,205,567,191,593,184,623,184,652,179,652,179,622,185,591,200,564,218,542"/>
<area shape="rect" href="objaddr_8h.html" title="Object address data structure." alt="" coords="201,592,325,617"/>
<area shape="poly" title=" " alt="" coords="233,543,247,579,242,581,228,545"/>
<area shape="poly" title=" " alt="" coords="269,617,287,661,319,724,341,756,366,787,396,814,429,835,464,847,510,858,627,875,753,885,864,891,863,897,752,891,626,880,509,863,462,853,427,840,393,818,362,791,336,760,314,726,282,664,264,619"/>
<area shape="poly" title=" " alt="" coords="325,613,650,664,650,670,324,618"/>
<area shape="poly" title=" " alt="" coords="275,616,305,649,346,689,397,729,394,733,342,693,302,653,271,619"/>
<area shape="poly" title=" " alt="" coords="262,593,248,557,253,555,267,591"/>
<area shape="poly" title=" " alt="" coords="252,619,209,658,205,654,248,615"/>
<area shape="poly" title=" " alt="" coords="739,90,1061,93,1280,99,1509,111,1725,128,1906,154,1977,170,2032,189,2067,211,2077,223,2080,236,2080,753,2075,785,2061,806,2039,819,2011,826,1945,831,1872,840,1799,853,1701,864,1465,881,1222,892,1030,897,1030,892,1222,886,1465,875,1701,858,1798,848,1872,835,1944,826,2010,821,2037,814,2057,802,2070,783,2075,752,2075,237,2072,225,2063,214,2030,194,1976,175,1905,159,1724,134,1508,116,1280,105,1061,98,739,95"/>
<area shape="poly" title=" " alt="" coords="656,106,607,134,546,176,515,202,486,232,461,264,441,300,407,384,391,454,389,526,397,617,407,675,419,725,414,726,402,676,392,618,384,526,386,453,402,383,436,298,456,261,482,228,511,198,543,172,604,129,653,102"/>
<area shape="poly" title=" " alt="" coords="619,96,524,99,414,108,314,126,275,139,248,154,232,172,225,190,224,237,224,386,227,450,232,505,226,505,221,451,219,386,219,237,220,189,228,169,245,150,273,134,312,121,413,103,524,94,619,90"/>
<area shape="rect" href="machine_8h.html" title="Data structures to simulate the RISC V machine." alt="" coords="1409,152,1559,177"/>
<area shape="poly" title=" " alt="" coords="739,95,1395,153,1395,158,739,101"/>
<area shape="rect" href="stats_8h.html" title="Data structures for gathering statistics about Nachos performance." alt="" coords="569,225,677,251"/>
<area shape="poly" title=" " alt="" coords="676,105,657,153,634,213,629,212,652,151,672,103"/>
<area shape="rect" href="process_8h.html" title="A process keeps track of the resources used by a running Nachos program." alt="" coords="667,152,795,177"/>
<area shape="poly" title=" " alt="" coords="689,103,716,139,712,142,685,106"/>
<area shape="rect" title=" " alt="" coords="259,152,349,177"/>
<area shape="poly" title=" " alt="" coords="619,107,364,155,363,150,618,101"/>
<area shape="poly" title=" " alt="" coords="1559,165,1665,169,1786,179,1897,196,1941,208,1973,223,1998,240,2016,258,2026,281,2029,310,2029,753,2020,772,1995,790,1957,805,1907,819,1778,842,1623,861,1457,875,1292,885,1030,897,1030,892,1292,880,1456,870,1623,855,1778,837,1906,813,1955,800,1993,785,2016,769,2024,752,2024,310,2021,282,2011,261,1995,244,1971,228,1939,213,1895,202,1785,185,1665,175,1559,170"/>
<area shape="rect" title=" " alt="" coords="1486,225,1557,251"/>
<area shape="poly" title=" " alt="" coords="1493,176,1511,212,1507,215,1488,179"/>
<area shape="rect" title=" " alt="" coords="1696,299,1755,324"/>
<area shape="poly" title=" " alt="" coords="1508,175,1597,223,1699,289,1696,293,1595,228,1506,180"/>
<area shape="rect" title=" " alt="" coords="1845,299,1923,324"/>
<area shape="poly" title=" " alt="" coords="1560,168,1793,187,1897,203,1933,213,1953,224,1960,242,1952,261,1936,278,1917,293,1914,289,1933,275,1948,258,1954,242,1949,227,1931,217,1896,208,1792,193,1559,173"/>
<area shape="rect" title=" " alt="" coords="1577,299,1652,324"/>
<area shape="poly" title=" " alt="" coords="1508,175,1540,196,1571,224,1593,254,1608,285,1603,287,1588,257,1567,227,1536,200,1505,180"/>
<area shape="rect" title=" " alt="" coords="1870,225,1938,251"/>
<area shape="poly" title=" " alt="" coords="1560,174,1694,194,1857,223,1856,228,1693,199,1559,179"/>
<area shape="rect" href="disk_8h.html" title="Data structures to emulate a physical disk." alt="" coords="886,665,1007,691"/>
<area shape="poly" title=" " alt="" coords="1408,170,1329,175,1243,185,1169,202,1142,213,1123,227,1104,256,1098,284,1100,312,1108,340,1124,400,1126,434,1117,472,1088,530,1049,582,1008,626,973,658,970,654,1004,622,1045,579,1083,527,1112,470,1120,434,1119,401,1103,341,1095,313,1093,284,1100,254,1119,224,1139,209,1167,197,1242,179,1328,169,1408,165"/>
<area shape="rect" href="instruction_8h.html" title="composition of instructioninterface of instruction class" alt="" coords="1683,225,1845,251"/>
<area shape="poly" title=" " alt="" coords="1530,175,1706,219,1705,224,1528,180"/>
<area shape="poly" title=" " alt="" coords="1409,175,691,234,691,228,1408,170"/>
<area shape="rect" href="translationtable_8h.html" title="Data structures for managing address translation" alt="" coords="811,519,1008,544"/>
<area shape="poly" title=" " alt="" coords="1409,174,1227,193,1139,208,1078,228,1046,244,1020,259,1003,279,997,310,997,386,992,431,970,472,954,493,936,511,933,508,950,490,966,469,986,430,992,386,992,310,999,277,1017,255,1043,239,1076,223,1138,203,1226,188,1408,169"/>
<area shape="rect" href="mmu_8h.html" title="Data structures for the MMU (Memory Management Unit)" alt="" coords="1133,225,1261,251"/>
<area shape="poly" title=" " alt="" coords="1439,180,1258,225,1256,219,1437,175"/>
<area shape="rect" href="ACIA_8h.html" title="Data Structures to emulate an ACIA device." alt="" coords="1285,225,1411,251"/>
<area shape="poly" title=" " alt="" coords="1463,180,1383,221,1381,217,1461,175"/>
<area shape="rect" href="interrupt_8h.html" title="Data structures to emulate low&#45;level interrupt hardware." alt="" coords="1235,592,1386,617"/>
<area shape="poly" title=" " alt="" coords="1482,179,1462,235,1454,272,1451,310,1451,460,1448,481,1440,502,1414,538,1381,567,1348,588,1345,583,1378,562,1411,534,1436,499,1443,480,1445,459,1445,310,1449,271,1457,233,1476,177"/>
<area shape="poly" title=" " alt="" coords="949,691,949,871,944,871,944,691"/>
<area shape="poly" title=" " alt="" coords="886,690,494,743,493,738,885,685"/>
<area shape="poly" title=" " alt="" coords="1760,252,1740,288,1736,285,1755,250"/>
<area shape="poly" title=" " alt="" coords="1785,248,1854,289,1851,294,1782,253"/>
<area shape="poly" title=" " alt="" coords="1741,253,1653,295,1650,290,1739,248"/>
<area shape="poly" title=" " alt="" coords="627,250,649,397,681,542,708,651,703,653,676,543,644,398,621,251"/>
<area shape="poly" title=" " alt="" coords="569,247,540,253,509,264,481,279,457,300,436,329,422,355,414,380,411,405,413,461,416,530,416,606,419,670,424,725,418,725,413,671,411,606,411,530,408,461,406,405,409,379,417,353,431,326,453,297,478,275,507,259,538,248,568,242"/>
<area shape="rect" href="config_8h.html" title="Data structures for setting up the Nachos hardware and." alt="" coords="467,299,581,324"/>
<area shape="poly" title=" " alt="" coords="608,253,553,293,550,288,605,249"/>
<area shape="poly" title=" " alt="" coords="468,327,410,341,339,363,263,393,187,430,118,477,87,504,61,533,39,565,22,599,12,637,8,677,8,753,12,786,21,818,45,872,40,874,16,820,6,787,3,753,3,677,6,636,17,598,34,562,57,530,84,500,114,473,185,426,261,388,338,358,408,336,467,321"/>
<area shape="poly" title=" " alt="" coords="582,314,646,320,716,331,778,348,801,358,818,370,827,383,830,396,827,420,824,444,825,456,830,469,850,492,874,510,870,514,846,496,826,472,820,457,818,444,822,419,825,396,822,385,814,374,799,363,776,353,715,337,645,326,581,319"/>
<area shape="rect" href="filesys_8h.html" title="Data structures to represent the Nachos file system." alt="" coords="461,372,584,397"/>
<area shape="poly" title=" " alt="" coords="526,324,526,359,520,358,521,324"/>
<area shape="poly" title=" " alt="" coords="908,545,891,597,876,666,875,695,877,725,892,783,913,833,934,872,930,875,909,836,887,784,872,726,869,695,871,665,886,595,903,543"/>
<area shape="poly" title=" " alt="" coords="901,546,858,594,836,623,821,648,803,671,773,693,722,711,649,726,494,746,493,741,648,721,721,706,771,688,799,667,816,645,832,620,854,590,897,543"/>
<area shape="poly" title=" " alt="" coords="544,395,572,416,597,444,614,478,623,510,628,567,631,624,639,655,654,689,685,739,716,773,752,802,801,835,848,860,895,878,893,883,846,865,799,840,749,806,712,777,681,742,650,692,634,657,626,625,622,567,618,511,609,480,592,447,568,420,541,400"/>
<area shape="rect" href="openfile_8h.html" title="Data structures to manipulate files." alt="" coords="451,445,583,471"/>
<area shape="poly" title=" " alt="" coords="524,398,522,432,517,432,519,397"/>
<area shape="poly" title=" " alt="" coords="519,471,518,535,520,582,527,634,539,689,557,743,584,793,620,835,637,846,661,856,723,871,795,882,864,889,864,894,794,887,722,877,659,861,635,851,617,839,580,796,553,745,534,690,522,635,515,582,513,535,514,471"/>
<area shape="poly" title=" " alt="" coords="516,472,434,726,429,725,511,470"/>
<area shape="poly" title=" " alt="" coords="472,473,292,518,291,513,471,468"/>
<area shape="poly" title=" " alt="" coords="1309,619,1293,661,1264,720,1222,785,1196,814,1167,839,1135,859,1100,874,1030,891,1029,886,1098,869,1133,854,1164,835,1192,810,1218,781,1259,718,1288,659,1304,617"/>
<area shape="poly" title=" " alt="" coords="1235,618,774,672,774,667,1235,612"/>
<area shape="poly" title=" " alt="" coords="760,175,849,219,905,253,961,294,1014,343,1058,398,1075,429,1088,461,1096,495,1099,530,1099,753,1096,775,1087,796,1060,832,1024,861,988,882,985,877,1021,856,1056,829,1083,794,1091,774,1093,752,1093,530,1091,496,1082,463,1070,431,1053,401,1010,346,958,298,902,257,846,224,758,180"/>
<area shape="poly" title=" " alt="" coords="715,180,653,220,650,215,712,175"/>
<area shape="poly" title=" " alt="" coords="667,178,612,192,552,216,524,232,498,251,475,274,457,300,445,326,440,348,442,370,452,396,467,418,487,436,483,440,463,422,447,399,437,371,435,347,440,324,452,297,471,270,495,247,521,228,550,211,610,187,666,173"/>
<area shape="rect" href="synch_8h.html" title="Data structures for synchronizing threads." alt="" coords="841,445,957,471"/>
<area shape="poly" title=" " alt="" coords="740,176,888,432,883,435,735,179"/>
<area shape="rect" href="addrspace_8h.html" title="Data structures to keep track of the memory resources of executing user programs (address spaces)." alt="" coords="659,372,805,397"/>
<area shape="poly" title=" " alt="" coords="733,178,735,358,729,358,728,178"/>
<area shape="poly" title=" " alt="" coords="957,465,1018,479,1080,505,1108,523,1129,546,1144,572,1149,603,1149,753,1148,779,1144,800,1134,819,1117,839,1097,855,1076,868,1030,885,1028,880,1073,863,1094,851,1113,835,1130,816,1139,799,1143,779,1144,753,1144,604,1139,574,1125,549,1104,527,1078,510,1017,484,956,470"/>
<area shape="poly" title=" " alt="" coords="872,473,836,493,801,520,768,576,726,654,722,652,763,573,797,517,833,488,870,468"/>
<area shape="poly" title=" " alt="" coords="840,468,309,524,309,519,840,463"/>
<area shape="poly" title=" " alt="" coords="903,444,927,388,937,351,941,313,941,237,936,207,923,182,902,161,876,143,814,118,752,104,753,98,816,113,879,139,906,157,927,179,942,205,947,236,947,313,942,352,932,390,907,446"/>
<area shape="poly" title=" " alt="" coords="805,386,882,396,922,406,961,420,995,439,1023,463,1041,493,1048,530,1048,753,1041,791,1022,826,998,855,974,878,971,874,994,852,1018,823,1036,789,1043,752,1043,530,1036,495,1019,466,992,443,959,425,921,411,881,402,804,391"/>
<area shape="poly" title=" " alt="" coords="734,398,716,652,711,651,729,397"/>
<area shape="poly" title=" " alt="" coords="698,400,566,443,564,438,697,395"/>
</map>
</div>
</div><a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Routines to choose the next thread to run, and to dispatch to that thread. </p>
<p>These routines assume that interrupts are already disabled. If interrupts are disabled, we can assume mutual exclusion (since we are on a uniprocessor).</p>
<p>NOTE: We can't use Locks to provide mutual exclusion here, since if we needed to wait for a lock, and the lock was busy, we would end up calling FindNextToRun(), and that would put us in an infinite loop.</p>
<h2><a class="anchor" id="autotoc_md49"></a>
Very simple implementation – no priorities, straight FIFO.</h2>
<p>This file is part of the Nachos-RiscV distribution Copyright (c) 2022 University of Rennes 1.</p>
<p>This program is free software: you can redistribute it and/or modify <br  />
 it under the terms of the GNU General Public License as published by <br  />
 the Free Software Foundation, version 3.</p>
<p>This program is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for more details </p>
<h2><a class="anchor" id="autotoc_md50"></a>
(see see &lt;http://www.gnu.org/licenses/&gt;).</h2>
</div></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.8
</small></address>
</body>
</html>
