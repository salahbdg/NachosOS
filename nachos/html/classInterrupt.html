<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Nachos: Interrupt Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">Nachos
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.8 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pri-methods">Private Member Functions</a> &#124;
<a href="#pri-attribs">Private Attributes</a> &#124;
<a href="classInterrupt-members.html">List of all members</a>  </div>
  <div class="headertitle"><div class="title">Interrupt Class Reference</div></div>
</div><!--header-->
<div class="contents">

<p><code>#include &lt;<a class="el" href="interrupt_8h_source.html">interrupt.h</a>&gt;</code></p>
<div class="dynheader">
Collaboration diagram for Interrupt:</div>
<div class="dyncontent">
<div class="center"><img src="classInterrupt__coll__graph.png" border="0" usemap="#aInterrupt_coll__map" alt="Collaboration graph"/></div>
<map name="aInterrupt_coll__map" id="aInterrupt_coll__map">
<area shape="rect" title="Defines a low level interrupt hardware." alt="" coords="7,373,139,699"/>
<area shape="rect" href="classList.html" title="Definition of a generic single&#45;linked &quot;list&quot;." alt="" coords="5,5,140,311"/>
<area shape="poly" title=" " alt="" coords="75,311,75,357,70,357,70,311"/>
</map>
</div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-methods" name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a736dd658be198f3dc94db0f876fb2499" id="r_a736dd658be198f3dc94db0f876fb2499"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classInterrupt.html#a736dd658be198f3dc94db0f876fb2499">Interrupt</a> ()</td></tr>
<tr class="separator:a736dd658be198f3dc94db0f876fb2499"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af33f88b80cf574d64f2fc3dae725b19b" id="r_af33f88b80cf574d64f2fc3dae725b19b"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classInterrupt.html#af33f88b80cf574d64f2fc3dae725b19b">~Interrupt</a> ()</td></tr>
<tr class="separator:af33f88b80cf574d64f2fc3dae725b19b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a37cb8eeb7f715ff79ca3a7038bda3b04" id="r_a37cb8eeb7f715ff79ca3a7038bda3b04"><td class="memItemLeft" align="right" valign="top"><a class="el" href="interrupt_8h.html#a9a61b6bd5154e67f1a6a0b1f2d4ac202">IntStatus</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classInterrupt.html#a37cb8eeb7f715ff79ca3a7038bda3b04">SetStatus</a> (<a class="el" href="interrupt_8h.html#a9a61b6bd5154e67f1a6a0b1f2d4ac202">IntStatus</a> <a class="el" href="classInterrupt.html#a558467f06f3d1945f63726738b93191e">level</a>)</td></tr>
<tr class="separator:a37cb8eeb7f715ff79ca3a7038bda3b04"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a51c534bc37984fdd1dfafc94e77ad39f" id="r_a51c534bc37984fdd1dfafc94e77ad39f"><td class="memItemLeft" align="right" valign="top"><a class="el" href="interrupt_8h.html#a9a61b6bd5154e67f1a6a0b1f2d4ac202">IntStatus</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classInterrupt.html#a51c534bc37984fdd1dfafc94e77ad39f">GetStatus</a> ()</td></tr>
<tr class="separator:a51c534bc37984fdd1dfafc94e77ad39f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ace54aece18806bae3614ebf9cc8c2991" id="r_ace54aece18806bae3614ebf9cc8c2991"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classListElement.html">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classInterrupt.html#ace54aece18806bae3614ebf9cc8c2991">Idle</a> ()</td></tr>
<tr class="separator:ace54aece18806bae3614ebf9cc8c2991"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0bf066222bb39da494919f08098217a5" id="r_a0bf066222bb39da494919f08098217a5"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classListElement.html">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classInterrupt.html#a0bf066222bb39da494919f08098217a5">Halt</a> (<a class="el" href="classListElement.html">int</a> <a class="el" href="classListElement.html">errorcode</a>)</td></tr>
<tr class="separator:a0bf066222bb39da494919f08098217a5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2dd7548881fde3cf3c8fba4d75437849" id="r_a2dd7548881fde3cf3c8fba4d75437849"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classListElement.html">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classInterrupt.html#a2dd7548881fde3cf3c8fba4d75437849">YieldOnReturn</a> ()</td></tr>
<tr class="separator:a2dd7548881fde3cf3c8fba4d75437849"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8f9a7ddd0f250de0dcd45fa5bfd80c11" id="r_a8f9a7ddd0f250de0dcd45fa5bfd80c11"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classListElement.html">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classInterrupt.html#a8f9a7ddd0f250de0dcd45fa5bfd80c11">DumpState</a> ()</td></tr>
<tr class="separator:a8f9a7ddd0f250de0dcd45fa5bfd80c11"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac403a14a9e41fa2b6dbd5c6056b87389" id="r_ac403a14a9e41fa2b6dbd5c6056b87389"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classListElement.html">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classInterrupt.html#ac403a14a9e41fa2b6dbd5c6056b87389">Schedule</a> (<a class="el" href="utility_8h.html#a582e9225ceec5bca99cda85169eea0bd">VoidFunctionPtr</a> handler, <a class="el" href="classListElement.html">int64_t</a> arg, <a class="el" href="classListElement.html">int</a> when, <a class="el" href="interrupt_8h.html#ab5b2eeac230a658259cf105702f447db">IntType</a> type)</td></tr>
<tr class="separator:ac403a14a9e41fa2b6dbd5c6056b87389"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0c0405e4a84e84876f23fbdc3125b28c" id="r_a0c0405e4a84e84876f23fbdc3125b28c"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classListElement.html">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classInterrupt.html#a0c0405e4a84e84876f23fbdc3125b28c">OneTick</a> (<a class="el" href="classListElement.html">int</a> <a class="el" href="classListElement.html">nbcy</a>)</td></tr>
<tr class="separator:a0c0405e4a84e84876f23fbdc3125b28c"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pri-methods" name="pri-methods"></a>
Private Member Functions</h2></td></tr>
<tr class="memitem:ab5adc6b35b5820fe525d8fcdf6229273" id="r_ab5adc6b35b5820fe525d8fcdf6229273"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classListElement.html">bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classInterrupt.html#ab5adc6b35b5820fe525d8fcdf6229273">CheckIfDue</a> (<a class="el" href="classListElement.html">bool</a> <a class="el" href="classListElement.html">advanceClock</a>)</td></tr>
<tr class="separator:ab5adc6b35b5820fe525d8fcdf6229273"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad83e8709b967745b6614ea7f75c446d7" id="r_ad83e8709b967745b6614ea7f75c446d7"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classListElement.html">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classInterrupt.html#ad83e8709b967745b6614ea7f75c446d7">ChangeLevel</a> (<a class="el" href="interrupt_8h.html#a9a61b6bd5154e67f1a6a0b1f2d4ac202">IntStatus</a> <a class="el" href="classListElement.html">old</a>, <a class="el" href="interrupt_8h.html#a9a61b6bd5154e67f1a6a0b1f2d4ac202">IntStatus</a> <a class="el" href="classListElement.html">now</a>)</td></tr>
<tr class="separator:ad83e8709b967745b6614ea7f75c446d7"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pri-attribs" name="pri-attribs"></a>
Private Attributes</h2></td></tr>
<tr class="memitem:a558467f06f3d1945f63726738b93191e" id="r_a558467f06f3d1945f63726738b93191e"><td class="memItemLeft" align="right" valign="top"><a class="el" href="interrupt_8h.html#a9a61b6bd5154e67f1a6a0b1f2d4ac202">IntStatus</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classInterrupt.html#a558467f06f3d1945f63726738b93191e">level</a></td></tr>
<tr class="separator:a558467f06f3d1945f63726738b93191e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a613e4276fbdf2c8f93e570b0cd3607eb" id="r_a613e4276fbdf2c8f93e570b0cd3607eb"><td class="memItemLeft" align="right" valign="top"><a class="el" href="list_8h.html#a1ae2c543196488a250b53a4582ab9ff9">ListTime</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classInterrupt.html#a613e4276fbdf2c8f93e570b0cd3607eb">pending</a></td></tr>
<tr class="separator:a613e4276fbdf2c8f93e570b0cd3607eb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5ea5d05ea85a95979a51b6450433ca10" id="r_a5ea5d05ea85a95979a51b6450433ca10"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classListElement.html">bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classInterrupt.html#a5ea5d05ea85a95979a51b6450433ca10">inHandler</a></td></tr>
<tr class="separator:a5ea5d05ea85a95979a51b6450433ca10"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a97d372b8fa7a2061fce62068bcb053c5" id="r_a97d372b8fa7a2061fce62068bcb053c5"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classListElement.html">bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classInterrupt.html#a97d372b8fa7a2061fce62068bcb053c5">yieldOnReturn</a></td></tr>
<tr class="separator:a97d372b8fa7a2061fce62068bcb053c5"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Defines a low level interrupt hardware. </p>
<p>We record whether interrupts are enabled or disabled, and any hardware interrupts that are scheduled to occur in the future. </p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="a736dd658be198f3dc94db0f876fb2499" name="a736dd658be198f3dc94db0f876fb2499"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a736dd658be198f3dc94db0f876fb2499">&#9670;&#160;</a></span>Interrupt()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Interrupt::Interrupt </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>initialize the interrupt simulation </p>
<p>Constructor. Initialize the simulation of hardware device interrupts.</p>
<p>Interrupts start disabled, with no interrupts pending, etc. </p>

</div>
</div>
<a id="af33f88b80cf574d64f2fc3dae725b19b" name="af33f88b80cf574d64f2fc3dae725b19b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af33f88b80cf574d64f2fc3dae725b19b">&#9670;&#160;</a></span>~Interrupt()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Interrupt::~Interrupt </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>de-allocate data structures </p>
<p>De-allocate the data structures needed by the interrupt simulation. </p>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="ad83e8709b967745b6614ea7f75c446d7" name="ad83e8709b967745b6614ea7f75c446d7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad83e8709b967745b6614ea7f75c446d7">&#9670;&#160;</a></span>ChangeLevel()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classListElement.html">void</a> Interrupt::ChangeLevel </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="interrupt_8h.html#a9a61b6bd5154e67f1a6a0b1f2d4ac202">IntStatus</a>&#160;</td>
          <td class="paramname"><em>old</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="interrupt_8h.html#a9a61b6bd5154e67f1a6a0b1f2d4ac202">IntStatus</a>&#160;</td>
          <td class="paramname"><em>now</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Change interrupts to be enabled or disabled, without advancing the simulated time (normally, enabling interrupts advances the time).</p>
<p>Used internally.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">old</td><td>the old interrupt status </td></tr>
    <tr><td class="paramname">now</td><td>the new interrupt status </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ab5adc6b35b5820fe525d8fcdf6229273" name="ab5adc6b35b5820fe525d8fcdf6229273"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab5adc6b35b5820fe525d8fcdf6229273">&#9670;&#160;</a></span>CheckIfDue()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classListElement.html">bool</a> Interrupt::CheckIfDue </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classListElement.html">bool</a>&#160;</td>
          <td class="paramname"><em>advanceClock</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Check if an interrupt is scheduled to occur, and if so, fire it off.</p>
<dl class="section return"><dt>Returns</dt><dd>true, if we fired off any interrupt handlers</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">advanceClock</td><td>if true, there is nothing in the ready queue, so we should simply advance the clock to when the next pending interrupt would occur (if any). If the pending interrupt is just the time-slice daemon, however, then we're done! </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a8f9a7ddd0f250de0dcd45fa5bfd80c11" name="a8f9a7ddd0f250de0dcd45fa5bfd80c11"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8f9a7ddd0f250de0dcd45fa5bfd80c11">&#9670;&#160;</a></span>DumpState()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classListElement.html">void</a> Interrupt::DumpState </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Print interrupt state. </p>
<p>Print the complete interrupt state - the status, and all interrupts that are scheduled to occur in the future. </p>

</div>
</div>
<a id="a51c534bc37984fdd1dfafc94e77ad39f" name="a51c534bc37984fdd1dfafc94e77ad39f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a51c534bc37984fdd1dfafc94e77ad39f">&#9670;&#160;</a></span>GetStatus()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="interrupt_8h.html#a9a61b6bd5154e67f1a6a0b1f2d4ac202">IntStatus</a> Interrupt::GetStatus </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>are enabled or disabled </p>
<p>Return whether interrupts </p>

</div>
</div>
<a id="a0bf066222bb39da494919f08098217a5" name="a0bf066222bb39da494919f08098217a5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0bf066222bb39da494919f08098217a5">&#9670;&#160;</a></span>Halt()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classListElement.html">void</a> Interrupt::Halt </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classListElement.html">int</a>&#160;</td>
          <td class="paramname"><em>errorcode</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Quit and print out stats. </p>
<p>Shut down Nachos cleanly, printing out performance statistics. </p>

</div>
</div>
<a id="ace54aece18806bae3614ebf9cc8c2991" name="ace54aece18806bae3614ebf9cc8c2991"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ace54aece18806bae3614ebf9cc8c2991">&#9670;&#160;</a></span>Idle()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classListElement.html">void</a> Interrupt::Idle </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>The ready queue is empty, roll <br  />
 simulated time forward until the next interrupt</p>
<p>Routine called when there is nothing in the ready queue.</p>
<p>Since something has to be running in order to put a thread on the ready queue, the only thing to do is to advance simulated time until the next scheduled hardware interrupt.</p>
<p>If there are no pending interrupts, stop. There's nothing more for us to do. </p>

</div>
</div>
<a id="a0c0405e4a84e84876f23fbdc3125b28c" name="a0c0405e4a84e84876f23fbdc3125b28c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0c0405e4a84e84876f23fbdc3125b28c">&#9670;&#160;</a></span>OneTick()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classListElement.html">void</a> Interrupt::OneTick </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classListElement.html">int</a>&#160;</td>
          <td class="paramname"><em>nbcycles</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Advance simulated time and check if there are any pending interrupts to be called.</p>
<p>Two things can cause OneTick to be called:</p><ul>
<li>interrupts are re-enabled</li>
<li>a user instruction is executed </li>
</ul>

</div>
</div>
<a id="ac403a14a9e41fa2b6dbd5c6056b87389" name="ac403a14a9e41fa2b6dbd5c6056b87389"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac403a14a9e41fa2b6dbd5c6056b87389">&#9670;&#160;</a></span>Schedule()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classListElement.html">void</a> Interrupt::Schedule </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="utility_8h.html#a582e9225ceec5bca99cda85169eea0bd">VoidFunctionPtr</a>&#160;</td>
          <td class="paramname"><em>handler</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classListElement.html">int64_t</a>&#160;</td>
          <td class="paramname"><em>arg</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classListElement.html">int</a>&#160;</td>
          <td class="paramname"><em>fromNow</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="interrupt_8h.html#ab5b2eeac230a658259cf105702f447db">IntType</a>&#160;</td>
          <td class="paramname"><em>type</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>by the hardware device simulators. </p>
<p>at time `&lsquo;when&rsquo;'. This is called</p>
<p>Arrange for the CPU to be interrupted when simulated time reaches "now + when".</p>
<p>Implementation: just put it on a sorted list.</p>
<p>NOTE: the Nachos kernel should not call this routine directly. Instead, it is only called by the hardware device simulators.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">handler</td><td>is the procedure to call when the interrupt occurs </td></tr>
    <tr><td class="paramname">arg</td><td>is the argument to pass to the procedure </td></tr>
    <tr><td class="paramname">fromNow</td><td>is how far in the future (in simulated time) the interrupt is to occur </td></tr>
    <tr><td class="paramname">type</td><td>is the hardware device that generated the interrupt </td></tr>
  </table>
  </dd>
</dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">handler</td><td>Schedule an interrupt to occur </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a37cb8eeb7f715ff79ca3a7038bda3b04" name="a37cb8eeb7f715ff79ca3a7038bda3b04"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a37cb8eeb7f715ff79ca3a7038bda3b04">&#9670;&#160;</a></span>SetStatus()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="interrupt_8h.html#a9a61b6bd5154e67f1a6a0b1f2d4ac202">IntStatus</a> Interrupt::SetStatus </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="interrupt_8h.html#a9a61b6bd5154e67f1a6a0b1f2d4ac202">IntStatus</a>&#160;</td>
          <td class="paramname"><em>now</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>and return previous setting. </p>
<p>Disable or enable interrupts <br  />
</p>
<p>Change interrupts to be enabled or disabled, and if interrupts are being enabled, advance simulated time by calling <a class="el" href="classInterrupt.html#a0c0405e4a84e84876f23fbdc3125b28c">OneTick()</a>.</p>
<dl class="section return"><dt>Returns</dt><dd>The old interrupt status.</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">now</td><td>the new interrupt status </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a2dd7548881fde3cf3c8fba4d75437849" name="a2dd7548881fde3cf3c8fba4d75437849"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2dd7548881fde3cf3c8fba4d75437849">&#9670;&#160;</a></span>YieldOnReturn()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classListElement.html">void</a> Interrupt::YieldOnReturn </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>from an interrupt handler </p>
<p>Cause a context switch on return <br  />
</p>
<p>Called from within an interrupt handler, to cause a context switch (for example, on a time slice) in the interrupted thread, when the handler returns.</p>
<p>We can't do the context switch here, because that would switch out the interrupt handler, and we want to switch out the interrupted thread. </p>

</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a id="a5ea5d05ea85a95979a51b6450433ca10" name="a5ea5d05ea85a95979a51b6450433ca10"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5ea5d05ea85a95979a51b6450433ca10">&#9670;&#160;</a></span>inHandler</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classListElement.html">bool</a> Interrupt::inHandler</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>TRUE if we are running an interrupt handler. </p>

</div>
</div>
<a id="a558467f06f3d1945f63726738b93191e" name="a558467f06f3d1945f63726738b93191e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a558467f06f3d1945f63726738b93191e">&#9670;&#160;</a></span>level</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="interrupt_8h.html#a9a61b6bd5154e67f1a6a0b1f2d4ac202">IntStatus</a> Interrupt::level</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>are interrupts enabled or disabled? </p>

</div>
</div>
<a id="a613e4276fbdf2c8f93e570b0cd3607eb" name="a613e4276fbdf2c8f93e570b0cd3607eb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a613e4276fbdf2c8f93e570b0cd3607eb">&#9670;&#160;</a></span>pending</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="list_8h.html#a1ae2c543196488a250b53a4582ab9ff9">ListTime</a>* Interrupt::pending</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>the list of interrupts scheduled to occur in the future </p>

</div>
</div>
<a id="a97d372b8fa7a2061fce62068bcb053c5" name="a97d372b8fa7a2061fce62068bcb053c5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a97d372b8fa7a2061fce62068bcb053c5">&#9670;&#160;</a></span>yieldOnReturn</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classListElement.html">bool</a> Interrupt::yieldOnReturn</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>TRUE if we are to context switch on return from the interrupt handler </p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>machine/<a class="el" href="interrupt_8h_source.html">interrupt.h</a></li>
<li>machine/<a class="el" href="interrupt_8cc.html">interrupt.cc</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.8
</small></address>
</body>
</html>
